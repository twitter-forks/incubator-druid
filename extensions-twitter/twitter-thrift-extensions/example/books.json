{
  "type": "kafka",
  "spec": {
    "dataSchema": {
      "dataSource": "thrift-test",
      "metricsSpec": [
        {
          "name": "count",
          "type": "count"
        }
      ],
      "granularitySpec": {
        "type": "uniform",
        "segmentGranularity": "HOUR",
        "queryGranularity": "FIFTEEN_MINUTE",
        "rollup": true,
        "intervals": null
      },
      "transformSpec": {
        "filter": null,
        "transforms": []
      },
      "parser": {
        "parseSpec": {
          "dimensionsSpec": {
            "dimensionExclusions": [],
            "dimensions": ["campaignId"],
            "spatialDimensions": []
          },
          "flattenSpec": {
            "useFieldDiscovery" : true,
            "fields" : [ {
              "type" : "path",
              "name" : "campaignId",
              "expr" : "$.6.5.5"
            },
              {
                "type" : "path",
                "name" : "ts",
                "expr" : "$.6.2"
              }]
          },
          "format": "thrift",
          "timestampSpec": {
            "column": "ts",
            "format": "millis"
          }
        },
        "type": "twitter-thrift"
      }
    },
    "tuningConfig": {
      "type": "kafka",
      "maxRowsInMemory": 1000000,
      "maxBytesInMemory": 0,
      "maxRowsPerSegment": 400000,
      "maxTotalRows": 20000000,
      "intermediatePersistPeriod": "PT1M",
      "maxPendingPersists": 0,
      "indexSpec": {
        "bitmap": {
          "type": "concise"
        },
        "dimensionCompression": "lz4",
        "metricCompression": "lz4",
        "longEncoding": "longs"
      },
      "indexSpecForIntermediatePersists": {
        "bitmap": {
          "type": "concise"
        },
        "dimensionCompression": "lz4",
        "metricCompression": "lz4",
        "longEncoding": "longs"
      },
      "buildV9Directly": true,
      "reportParseExceptions": false,
      "handoffConditionTimeout": 0,
      "resetOffsetAutomatically": false,
      "segmentWriteOutMediumFactory": null,
      "workerThreads": null,
      "chatThreads": null,
      "chatRetries": 12,
      "httpTimeout": "PT120S",
      "shutdownTimeout": "PT80S",
      "offsetFetchPeriod": "PT30S",
      "intermediateHandoffPeriod": "P2147483647D",
      "logParseExceptions": false,
      "maxParseExceptions": 2147483647,
      "maxSavedParseExceptions": 0,
      "skipSequenceNumberAvailabilityCheck": false,
      "repartitionTransitionDuration": "PT120S"
    },
    "ioConfig": {
      "topic": "ads_spend_prod",
      "inputFormat": null,
      "replicas": 2,
      "taskCount": 80,
      "taskDuration": "PT3600S",
      "consumerProperties": {
        "bootstrap.servers": "10.133.213.102:9093, 10.47.156.136:9093, 10.81.48.100:9093",
        "security.protocol": "SASL_SSL",
        "ssl.truststore.location": "/etc/tw_truststore/messaging/kafka/client.truststore.jks",
        "sasl.mechanism": "GSSAPI",
        "sasl.kerberos.service.name": "kafka",
        "sasl.kerberos.server.name": "kafka"
      },
      "pollTimeout": 100,
      "startDelay": "PT5S",
      "period": "PT30S",
      "useEarliestOffset": false,
      "completionTimeout": "PT5400S",
      "lateMessageRejectionPeriod": "PT28800S",
      "earlyMessageRejectionPeriod": null,
      "lateMessageRejectionStartDateTime": null,
      "stream": "smyte_feed_features",
      "useEarliestSequenceNumber": false
    },
    "context": null,
    "suspended": false
  }
}
